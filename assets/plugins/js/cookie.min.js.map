{"version":3,"file":"cookie.min.js","sources":["../../../src/plugins/cookie/js/cookie.js"],"sourcesContent":["const NAME = 'cookie';\r\n\r\nclass Cookie {\r\n  // Getters\r\n  static get NAME() {\r\n    return NAME;\r\n  }\r\n\r\n  // Public\r\n\r\n  // Private\r\n\r\n  // Static\r\n  static set(name, value, attributes = {}) {\r\n    attributes = Object.assign(attributes, { path: '/' });\r\n\r\n    // convert number to date\r\n    if (typeof attributes.expires === 'number') {\r\n      // expires in days\r\n      attributes.expires = new Date(Number(new Date()) + attributes.expires * 1000 * 60 * 60 * 24);\r\n    }\r\n\r\n    if (attributes.expires) {\r\n      // convert date to string\r\n      attributes.expires = attributes.expires.toUTCString();\r\n    }\r\n\r\n    // if value is an object or an array transform to string\r\n    const stringifiedValue = JSON.stringify(value);\r\n    if (/^[{[]/.test(stringifiedValue)) {\r\n      value = stringifiedValue;\r\n    }\r\n\r\n    // decode value characters\r\n    value = encodeURIComponent(String(value));\r\n\r\n    // decode name characters\r\n    name = encodeURIComponent(String(name)).replace(/[()]/g, escape);\r\n\r\n    // convert attributes array to string\r\n    let stringifiedAttributes = '';\r\n    Object.keys(attributes).forEach((name) => {\r\n      stringifiedAttributes += `; ${name}`;\r\n      stringifiedAttributes += `=${attributes[name].split(';')[0]}`;\r\n    });\r\n\r\n    return (document.cookie = `${name}=${value}${stringifiedAttributes}`);\r\n  }\r\n\r\n  static get(name) {\r\n    const cookies = document.cookie ? document.cookie.split('; ') : [];\r\n    const result = {};\r\n\r\n    cookies.forEach((el) => {\r\n      const cookie = el.split('=');\r\n      let cookieValue = cookie.slice(1).join('=');\r\n\r\n      // decode cookies name and value\r\n      const cookieName = cookie[0].replace(/(%[0-9A-Z]{2})+/g, decodeURIComponent);\r\n\r\n      // decode cookie value\r\n      cookieValue = cookieValue.replace(/(%[0-9A-Z]{2})+/g, decodeURIComponent);\r\n\r\n      result[cookieName] = cookieValue;\r\n    });\r\n\r\n    return name ? result[name] : result;\r\n  }\r\n\r\n  static remove(name) {\r\n    this.set(name, '', { expires: -1 });\r\n  }\r\n\r\n  static showModalNewUser(id) {\r\n    const isFirstVisitOnPage = !this.get('is-first-visit');\r\n\r\n    if (isFirstVisitOnPage) {\r\n      const modalElement = document.getElementById(id);\r\n      if (modalElement) {\r\n        const modal = new mdb.Modal(modalElement);\r\n        modal.show();\r\n\r\n        modalElement.addEventListener('hidden.bs.modal', () => {\r\n          this.set('is-first-visit', false, { expires: 365 });\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  static showModalScoring(id, value) {\r\n    const counter = Number(this.get('visit-counter')) || 0;\r\n    const newCounter = counter + 1;\r\n\r\n    this.set('visit-counter', newCounter, { expires: 365 });\r\n\r\n    if (newCounter === value) {\r\n      const modalElement = document.getElementById(id);\r\n\r\n      if (modalElement) {\r\n        const modal = new mdb.Modal(modalElement);\r\n        modal.show();\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport default Cookie;\r\n"],"names":["NAME","set","name","value","attributes","Object","assign","path","expires","Date","Number","toUTCString","stringifiedValue","JSON","stringify","test","encodeURIComponent","String","replace","escape","stringifiedAttributes","keys","forEach","split","document","cookie","get","cookies","result","el","cookieValue","slice","join","cookieName","decodeURIComponent","remove","this","showModalNewUser","id","modalElement","getElementById","mdb","Modal","show","addEventListener","showModalScoring","newCounter"],"mappings":"8OAEA,MAEE,eAAWA,GACF,MALE,QAMV,CAOD,UAAOC,CAAIC,EAAMC,EAAOC,EAAa,CAAA,GAID,iBAHlCA,EAAaC,OAAOC,OAAOF,EAAY,CAAEG,KAAM,OAGzBC,UAEpBJ,EAAWI,QAAU,IAAIC,KAAKC,OAAW,IAAAD,MAA+B,IAArBL,EAAWI,QAAiB,GAAK,GAAK,KAGvFJ,EAAWI,UAEFJ,EAAAI,QAAUJ,EAAWI,QAAQG,eAIpC,MAAAC,EAAmBC,KAAKC,UAAUX,GACpC,QAAQY,KAAKH,KACPT,EAAAS,GAIFT,EAAAa,mBAAmBC,OAAOd,IAGlCD,EAAOc,mBAAmBC,OAAOf,IAAOgB,QAAQ,QAASC,QAGzD,IAAIC,EAAwB,GAM5B,OALAf,OAAOgB,KAAKjB,GAAYkB,SAASpB,IAC/BkB,GAAyB,KAAKlB,IACLkB,GAAA,IAAIhB,EAAWF,GAAMqB,MAAM,KAAK,IAAE,IAGrDC,SAASC,OAAS,GAAGvB,KAAQC,IAAQiB,GAC9C,CAED,UAAOM,CAAIxB,GACH,MAAAyB,EAAUH,SAASC,OAASD,SAASC,OAAOF,MAAM,MAAQ,GAC1DK,EAAS,CAAA,EAeR,OAbCD,EAAAL,SAASO,IACT,MAAAJ,EAASI,EAAGN,MAAM,KACxB,IAAIO,EAAcL,EAAOM,MAAM,GAAGC,KAAK,KAGvC,MAAMC,EAAaR,EAAO,GAAGP,QAAQ,mBAAoBgB,oBAG3CJ,EAAAA,EAAYZ,QAAQ,mBAAoBgB,oBAEtDN,EAAOK,GAAcH,CAAA,IAGhB5B,EAAO0B,EAAO1B,GAAQ0B,CAC9B,CAED,aAAOO,CAAOjC,GACZkC,KAAKnC,IAAIC,EAAM,GAAI,CAAEM,YACtB,CAED,uBAAO6B,CAAiBC,GAGtB,IAF4BF,KAAKV,IAAI,kBAEb,CAChB,MAAAa,EAAef,SAASgB,eAAeF,GAC7C,GAAIC,EAAc,CACF,IAAIE,IAAIC,MAAMH,GACtBI,OAEOJ,EAAAK,iBAAiB,mBAAmB,KAC/CR,KAAKnC,IAAI,kBAAkB,EAAO,CAAEO,QAAS,KAAK,GAErD,CACF,CACF,CAED,uBAAOqC,CAAiBP,EAAInC,GAC1B,MACM2C,GADUpC,OAAO0B,KAAKV,IAAI,mBAAqB,GACxB,EAI7B,GAFAU,KAAKnC,IAAI,gBAAiB6C,EAAY,CAAEtC,QAAS,MAE7CsC,IAAe3C,EAAO,CAClB,MAAAoC,EAAef,SAASgB,eAAeF,GAE7C,GAAIC,EAAc,CACF,IAAIE,IAAIC,MAAMH,GACtBI,MACP,CACF,CACF"}